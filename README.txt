/*************************************************************************************************/
Project start from 2022.04.07

Version: v1.0.0407

本项目适用于STM32F407+ADBMS6815
在STM32F407+LTC6811 v.220328基础上创建

1、基于ADBMS6815芯片手册中寄存器、指令码、SPI数据帧变动（+CRC10），完成6811->6815代码迁移
2、数据结构变更，优化cell_asic结构体（包含BMS数据）、扩充st结构体（包含状态寄存器数据）
3、CAN错误处理（利用HAL_CAN_ErrorCallback）
4、基于独立看门狗实现子板卡死重启机制
5、整体代码性能优化

/*************************************************************************************************/

Version: v1.1.0408

更改：看门狗喂狗程序由TIM2完成，TIM2溢出中断更改为15s。
（独立看门狗周期32.768s）

/*************************************************************************************************/

Version: v2.1.1

- KEY VERSION - 关键版本 -
已实现：
1、测量业务（CAN测量数据帧应答）
2、配置业务（CAN配置数据帧应答）
3、CAN通信错误处理与双CAN热备切换

注意：目前只对3号6815板进行了测试，3号板仅在GPIO5口上焊有温敏电阻。
CAN数据帧版本（20220501）

/*************************************************************************************************/

Version:v.2.2.0

增加SPI-MISO多路复用器（三选一选通）。

引脚：
6815┌cs\多路复用器		A1(PD5)		A0(PD3)		EN(PD4)
--------------------------------------------------------------------------------------------------
1:  PG10			0		0		1
2:  PD1			1		0		1
3:  PB8			1		1		1

GPIO_TypeDef *multiplexer_GPIO[3] = {GPIOD, GPIOD, GPIOD}; // A1 A0 EN
uint16_t multiplexer_PIN[3] = {GPIO_PIN_5, GPIO_PIN_3, GPIO_PIN_4};

流程：
EN拉高延时几十微秒，配置A1、A0后再拉高几十微秒，完成选通。


/*************************************************************************************************/

Version:v2.2.1

新增单体电压测量

/*************************************************************************************************/

Version:v2.2.2.uf

非正式发布版
重写了RDCVALL指令，但还存在一些问题，怀疑是校验上的问题，待测试

/*************************************************************************************************/

Version:v2.2.2

重写RDCVALL指令（已排查问题，是malloc后未free导致的）
新增RDASALL指令
调整basic_service测量指令顺序，并将RDCVALL、RDASALL实装。


/*************************************************************************************************/

Version:v2.2.3

新增mute指令和unmute指令
在做AD转换前主动关闭了均衡，转换完恢复均衡
修正了均衡策略中的一个问题

/*************************************************************************************************/

Version:v2.2.4

修复一个UploadMeasureData()中的一个问题
修改BMS_CAN协议，增加了单体电压的上传（测试用），新版本20220701
新增UploadCVData()用于上传单体电压（已实装，目前仅用作测试，请参阅BMS_CAN协议20220701）
